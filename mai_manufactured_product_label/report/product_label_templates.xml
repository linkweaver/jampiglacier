<?xml version="1.0" encoding="utf-8"?>
<odoo>

<template id="report_product_label_document">
    <t t-call="web.basic_layout">
        <t t-set="doc" t-value="doc.with_context({'lang':doc.user_id.partner_id.lang})" />
        <div class="page">
            <div class="row" style="border-bottom: solid 2px">
                <div class="col-6">
                    <img style="height: 55px" t-attf-src="data:image/gif;base64, #{doc.company_id.datas}"/>
                </div>
                <div class="col-6" style="font-size: 8px; margin-left: 20px;">
                    <strong><span t-field="doc.company_id.name"/></strong><br/>
                    <span>CIF: </span><span t-field="doc.company_id.vat"/>
                    <address t-field="doc.company_id.partner_id" t-options='{"widget": "contact", "fields": ["address"], "no_marker": True}' />
                    <t t-if="doc.company_id.hrn"><span>NRSA: </span><span t-field="doc.company_id.hrn"/></t>
                </div>
            </div>
            <strong><span t-esc="doc.product_id.name" style="{'font-size': 12px;}"/></strong>
            <p t-esc="doc.product_id.ingredients" style="font-size: 8px;"/>
            <div class="row" style="font-size: 8px;">
                <div class="col-12">
                    <t t-foreach="doc.product_id.allergy_image_ids" t-as="l">
                        <img width="12px" height="12px" t-attf-src="data:image/gif;base64, #{l.image}"/>
                        <span t-esc="l.name"/><span style="margin-right: 5px"/>
                    </t>
                </div>
            </div>
            <span style="font-size: 8px; margin-top: 20px;"><strong>Información nutricional por 100 g:</strong></span>
            <div class="row" style="font-size: 8px;">
                <div class="col-7">
                    <table width="100%">
                       <tbody class="sale_tbody">
                            <tr t-foreach="doc.product_id.energetic_ids" t-as="l">
                                <td width="80%">
                                    <span t-esc="l.enargy_id.name"/>
                                </td>
                                <td width="20%">
                                    <span t-esc="l.name"/>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="col-5" style="text-align: center;">
                    <img t-att-src="'/report/barcode/?type=%s&amp;value=%s&amp;width=%s&amp;height=%s'%('EAN13', doc.product_id.barcode, 130, 50)"/><br/>
                    <p t-field="doc.product_id.barcode" style="text-align: center;"/>
                </div>
            </div>
            <div class="row" style="font-size: 8px; margin-top: 20px;">
                <div class="col-6">
                    <t t-if="doc.product_id.tracking == 'lot' and doc.finished_move_line_ids">
                        <span>Número de Lote: </span> <span t-esc="doc.finished_move_line_ids[0].lot_id.name"/>
                    </t>
                    <t t-if="doc.get_expiry_date()">
                        <span>Fecha de consumo preferente: </span> <span t-esc="doc.get_expiry_date()"/>
                    </t>
                </div>
                <div class="col-6">
                    <span>Peso Neto: </span> <span t-esc="doc.product_id.weight"/> kg
                </div>
            </div>
            <div class="row" style="font-size: 8px;">
                <div class="col-12">
                    <span t-esc="doc.product_id.conservation_of_pack"/>
                    <span t-esc="doc.product_id.product_use"/>
                </div>
            </div>
        </div>
    </t>
</template>


<template id="report_product_label">
    <t t-call="web.html_container">
        <t t-foreach="docs" t-as="doc">
            <t t-call="mai_manufactured_product_label.report_product_label_document" t-lang="doc.user_id.partner_id.lang"/>
        </t>
    </t>
</template>

</odoo>
